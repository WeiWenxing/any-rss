# Any RSS Bot

ä¸€ä¸ªæ”¯æŒ Telegram å’Œ Discord çš„é€šç”¨ RSS/Feed ç›‘æ§æœºå™¨äººã€‚

## ç¯å¢ƒè¦æ±‚

- Python 3.8+
- pip
- virtualenv

## å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/WeiWenxing/any-rss.git
cd any-rss
```

2. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# Windowsæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
venv\Scripts\activate

# Linux/Macæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate
```

3. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

4. é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp env.example .env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„é…ç½®
```

### ç¯å¢ƒå˜é‡è¯´æ˜

å¿…å¡«é…ç½®:
- `TELEGRAM_BOT_TOKEN`: Telegramæœºå™¨äººtoken (ä»@BotFatherè·å–)

å¯é€‰é…ç½®:
- `TELEGRAM_TARGET_CHAT`: é»˜è®¤æ¶ˆæ¯å‘é€ç›®æ ‡ (å¯ä»¥æ˜¯é¢‘é“å¦‚@channelnameæˆ–ç”¨æˆ·IDå¦‚123456789)
- `DISCORD_TOKEN`: Discordæœºå™¨äººtoken (å¦‚éœ€DiscordåŠŸèƒ½åˆ™å¿…å¡«)

## è¿è¡Œæ–¹å¼

1. ç›´æ¥è¿è¡Œ
```bash
python any-rss-bot.py
```

2. ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x restart.sh

# è¿è¡Œè„šæœ¬
./restart.sh
```

## æ—¥å¿—æŸ¥çœ‹

ç¨‹åºè¿è¡Œæ—¥å¿—ä½äºï¼š
```bash
tail -f /tmp/any-rss-bot.log
```

## ç›®å½•ç»“æ„

```
project/
â”œâ”€â”€ apps/                 # åº”ç”¨å…¥å£å±‚
â”‚   â”œâ”€â”€ telegram_bot.py
â”‚   â””â”€â”€ discord_bot.py
â”œâ”€â”€ core/                 # æ ¸å¿ƒé…ç½®å±‚
â”‚   â””â”€â”€ config.py        # é…ç½®æ–‡ä»¶å¤„ç†
â”œâ”€â”€ services/            # å…·ä½“æœåŠ¡å±‚
â”‚   â””â”€â”€ rss/            # RSSæœåŠ¡å®ç°
â”‚       â”œâ”€â”€ commands.py  # RSSå‘½ä»¤å¤„ç†
â”‚       â””â”€â”€ manager.py   # RSSç®¡ç†å™¨
â”œâ”€â”€ storage/             # æ•°æ®å­˜å‚¨å±‚
â”‚   â””â”€â”€ rss/
â”‚       â”œâ”€â”€ config/      # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ feeds_data/  # Feedæ•°æ®å­˜å‚¨
â””â”€â”€ any-rss-bot.py      # ä¸»ç¨‹åºå…¥å£
```

## å‘½ä»¤ä½¿ç”¨è¯´æ˜

### Telegram å‘½ä»¤

#### åŸºç¡€å‘½ä»¤
- `/start` - å¯åŠ¨æœºå™¨äºº
- `/help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

#### RSSè®¢é˜…ç®¡ç†
- `/add <RSS_URL> <CHAT_ID>` - æ·»åŠ æ–°çš„RSS/Feedç›‘æ§å¹¶ç»‘å®šåˆ°æŒ‡å®šé¢‘é“
- `/del <RSS_URL>` - åˆ é™¤æŒ‡å®šçš„RSS/Feedç›‘æ§
- `/list` - æ˜¾ç¤ºæ‰€æœ‰ç›‘æ§çš„RSS/Feedåˆ—è¡¨åŠå…¶ç»‘å®šçš„é¢‘é“
- `/news` - æ‰‹åŠ¨æ£€æŸ¥æ‰€æœ‰è®¢é˜…æºå¹¶å‘é€æ›´æ–°å†…å®¹åˆ°å¯¹åº”é¢‘é“

#### å¼€å‘è€…è°ƒè¯•å‘½ä»¤
- `/show [type] <item_xml>` - æµ‹è¯•å•ä¸ªRSSæ¡ç›®çš„æ¶ˆæ¯æ ¼å¼

### å‘½ä»¤è¯¦ç»†è¯´æ˜

#### 1. æ·»åŠ RSSè®¢é˜…
```bash
# åŸºæœ¬æ ¼å¼
/add <RSS_URL> <CHAT_ID>

# ç¤ºä¾‹
/add https://example.com/feed.xml @my_channel
/add https://rsshub.app/github/issue/DIYgod/RSSHub -1001234567890
/add https://feeds.feedburner.com/example 123456789
```

**æ”¯æŒçš„é¢‘é“IDæ ¼å¼ï¼š**
- `@channel_name` - é¢‘é“ç”¨æˆ·å
- `-1001234567890` - é¢‘é“æ•°å­—ID
- `123456789` - ç”¨æˆ·æ•°å­—ID

#### 2. åˆ é™¤RSSè®¢é˜…
```bash
# åˆ é™¤æŒ‡å®šè®¢é˜…
/del https://example.com/feed.xml
```

#### 3. æŸ¥çœ‹è®¢é˜…åˆ—è¡¨
```bash
# æ˜¾ç¤ºæ‰€æœ‰è®¢é˜…åŠå…¶ç»‘å®šçš„é¢‘é“
/list
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
å½“å‰RSSè®¢é˜…åˆ—è¡¨ï¼š
- https://example.com/feed.xml â†’ @my_channel
- https://another.com/rss â†’ -1001234567890
- https://third.com/atom.xml â†’ (æœªè®¾ç½®é¢‘é“)
```

#### 4. æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°
```bash
# å¼ºåˆ¶æ£€æŸ¥æ‰€æœ‰è®¢é˜…æºå¹¶å‘é€æ›´æ–°
/news
```

#### 5. å¼€å‘è€…è°ƒè¯•å‘½ä»¤
```bash
# è‡ªåŠ¨åˆ¤æ–­æ¶ˆæ¯æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
/show <item><title>æ ‡é¢˜</title><description>å†…å®¹</description></item>

# å¼ºåˆ¶æ–‡å­—ä¸ºä¸»æ¨¡å¼
/show text <item><title>æ ‡é¢˜</title><description>å†…å®¹</description></item>

# å¼ºåˆ¶å›¾ç‰‡ä¸ºä¸»æ¨¡å¼
/show media <item><title>æ ‡é¢˜</title><description>å†…å®¹</description></item>
```

**typeå‚æ•°è¯´æ˜ï¼š**
- `auto` - è‡ªåŠ¨åˆ¤æ–­ï¼ˆâ‰¥2å¼ å›¾ç‰‡ä¸ºå›¾ç‰‡ä¸ºä¸»ï¼Œ<2å¼ å›¾ç‰‡ä¸ºæ–‡å­—ä¸ºä¸»ï¼‰
- `text` - å¼ºåˆ¶æ–‡å­—ä¸ºä¸»æ¨¡å¼
- `media` - å¼ºåˆ¶å›¾ç‰‡ä¸ºä¸»æ¨¡å¼

### æ¶ˆæ¯æ ¼å¼è¯´æ˜

#### å›¾ç‰‡ä¸ºä¸»æ¨¡å¼ï¼ˆâ‰¥2å¼ å›¾ç‰‡ï¼‰
- å‘é€å›¾ç‰‡ç»„ï¼Œæ¯ç»„æœ€å¤š10å¼ å›¾ç‰‡
- ç®€æ´captionæ ¼å¼ï¼š`#ä½œè€… æ ‡é¢˜ ğŸ“Š 1/2`ï¼ˆå¤šæ‰¹æ¬¡æ—¶æ˜¾ç¤ºæ‰¹æ¬¡ä¿¡æ¯ï¼‰
- ä½¿ç”¨æ™ºèƒ½åˆ†æ‰¹ç®—æ³•ï¼Œç¡®ä¿å›¾ç‰‡åˆ†å¸ƒå‡åŒ€

#### æ–‡å­—ä¸ºä¸»æ¨¡å¼ï¼ˆ<2å¼ å›¾ç‰‡ï¼‰
- å…ˆå‘é€å®Œæ•´æ–‡å­—æ¶ˆæ¯ï¼ˆåŒ…å«æ—¶é—´ã€æ ‡é¢˜ã€é“¾æ¥ã€å†…å®¹ï¼‰
- å†å‘é€å›¾ç‰‡ç»„ï¼ˆå¦‚æœæœ‰å›¾ç‰‡ï¼Œä½¿ç”¨ç®€æ´captionï¼‰

### æ”¯æŒçš„Feedæ ¼å¼
- **RSS 2.0**: æ ‡å‡†çš„RSSæ ¼å¼
- **Atom 1.0**: æ ‡å‡†çš„Atomæ ¼å¼
- **RSSHubç”Ÿæˆçš„Feed**: æ”¯æŒRSSHubç­‰å·¥å…·ç”Ÿæˆçš„æ ‡å‡†Feed

### ç›‘æ§åŠŸèƒ½è¯´æ˜

#### è®¢é˜…ç®¡ç†
1. **é¢‘é“ç»‘å®š**: æ¯ä¸ªRSSæºå¯ä»¥ç»‘å®šåˆ°ä¸åŒçš„é¢‘é“ï¼Œæ”¯æŒå¤šé¢‘é“åˆ†å‘
2. **é¦–æ¬¡æ·»åŠ **: é¦–æ¬¡æ·»åŠ è®¢é˜…æºæ—¶ï¼Œä¼šå±•ç¤ºæ‰€æœ‰ç°æœ‰å†…å®¹
3. **æ™ºèƒ½å»é‡**: åŸºäºæ¡ç›®ID/é“¾æ¥çš„æ™ºèƒ½å»é‡æœºåˆ¶

#### è‡ªåŠ¨ç›‘æ§
1. **å®šæ—¶æ£€æŸ¥**: æ¯å°æ—¶è‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰è®¢é˜…æºçš„æ›´æ–°
2. **å·®å¼‚æ£€æµ‹**: è‡ªåŠ¨å¯¹æ¯”å¹¶å‘ç°æ–°å¢çš„æ¡ç›®
3. **åˆ†é¢‘é“æ¨é€**: å°†æ›´æ–°å†…å®¹å‘é€åˆ°å¯¹åº”ç»‘å®šçš„é¢‘é“

#### åˆ é™¤æœºåˆ¶
- åˆ é™¤è®¢é˜…æ—¶åªåˆ é™¤é…ç½®è®°å½•ï¼Œä¿ç•™æ‰€æœ‰å†å²æ•°æ®
- é‡æ–°æ·»åŠ æ—¶å¯é¿å…é‡å¤æ¨é€å†å²å†…å®¹
- ä¿æŠ¤ç”¨æˆ·çš„å†å²æ•°æ®ä¸ä¸¢å¤±

### æ•°æ®å­˜å‚¨
- æ¯ä¸ªFeedä½¿ç”¨URLå“ˆå¸Œå€¼ä½œä¸ºå”¯ä¸€ç›®å½•å
- åŸå§‹Feedå†…å®¹ä»¥XMLæ ¼å¼å­˜å‚¨
- æ”¯æŒå†å²ç‰ˆæœ¬å¯¹æ¯”å’Œæ–°å¢å†…å®¹æ£€æµ‹
- é…ç½®æ–‡ä»¶è®°å½•URLä¸é¢‘é“IDçš„æ˜ å°„å…³ç³»

## æŠ€æœ¯ç‰¹æ€§

- **å¼‚æ­¥å¤„ç†**: ä½¿ç”¨asyncioå®ç°é«˜æ•ˆçš„å¹¶å‘å¤„ç†
- **å¤šå¹³å°æ”¯æŒ**: åŒæ—¶æ”¯æŒTelegramå’ŒDiscord
- **æ™ºèƒ½æ¶ˆæ¯æ ¼å¼**: æ ¹æ®å†…å®¹è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ˜¾ç¤ºæ–¹å¼
- **é¢‘é“ç»‘å®š**: æ”¯æŒæ¯ä¸ªRSSæºç»‘å®šåˆ°ä¸åŒé¢‘é“
- **æ™ºèƒ½åˆ†æ‰¹**: å›¾ç‰‡å‘é€ä½¿ç”¨å‡è¡¡åˆ†æ‰¹ç®—æ³•
- **Flood Control**: å®Œå–„çš„å‘é€é€Ÿåº¦æ§åˆ¶å’Œé‡è¯•æœºåˆ¶
- **æ•°æ®æŒä¹…åŒ–**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ï¼Œæ”¯æŒæ•°æ®æ¢å¤
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•
- **æ ‡å‡†å…¼å®¹**: æ”¯æŒæ ‡å‡†çš„RSS 2.0å’ŒAtom 1.0æ ¼å¼

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿.envæ–‡ä»¶ä¸­é…ç½®äº†æ­£ç¡®çš„bot token
2. æ·»åŠ è®¢é˜…æ—¶å¿…é¡»æŒ‡å®šç›®æ ‡é¢‘é“ID
3. å¦‚æœç›®æ ‡æ˜¯Telegramé¢‘é“ï¼Œéœ€è¦å°†æœºå™¨äººæ·»åŠ ä¸ºé¢‘é“çš„ç®¡ç†å‘˜
4. æœºå™¨äººéœ€è¦æœ‰åœ¨ç›®æ ‡é¢‘é“å‘å¸ƒæ¶ˆæ¯çš„æƒé™
5. é¦–æ¬¡è¿è¡Œæ—¶éœ€è¦åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
